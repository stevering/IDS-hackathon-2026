# DS AI Guardian — Chrome Extension

Floating animated mascot (and future AI design-system guardian) for Chrome and Figma Desktop.

---

## Quick start

```bash
# From the monorepo root:
pnpm install
pnpm --filter @guardian/chrome-extension build
```

The build output is at `packages/chrome-extension/dist/`.

---

## Load in Chrome (dev)

1. Open `chrome://extensions`
2. Enable **Developer mode** (top-right toggle)
3. Click **Load unpacked** → select `packages/chrome-extension/dist/`
4. The Guardian mascot appears on every page

To rebuild after changes:

```bash
pnpm --filter @guardian/chrome-extension dev   # watch mode
```

Chrome hot-reloads content scripts automatically in dev mode.
For the popup / service worker, click **↺** in `chrome://extensions`.

---

## Test on Figma web

1. Load the extension in Chrome as above
2. Open [figma.com](https://www.figma.com) → the Guardian floats in the bottom-right corner
3. Click it to minimize/expand

---

## Load in Figma Desktop

Figma Desktop embeds Chromium (Electron). Load the extension by launching Figma with the `--load-extension` flag:

### macOS

```bash
/Applications/Figma.app/Contents/MacOS/Figma \
  --load-extension="$(pwd)/packages/chrome-extension/dist"
```

Or create a shell alias in your `.zshrc`:

```bash
alias figma-dev='/Applications/Figma.app/Contents/MacOS/Figma \
  --load-extension="/absolute/path/to/IDS-hackathon-2026/packages/chrome-extension/dist"'
```

Then just run `figma-dev`.

### Windows

```powershell
& "C:\Users\<you>\AppData\Local\Figma\Figma.exe" `
  --load-extension="C:\path\to\IDS-hackathon-2026\packages/chrome-extension\dist"
```

> **Note:** `--load-extension` requires an absolute path.

### Verify it loaded

Open Figma Desktop → `Cmd+Option+I` (Mac) / `Ctrl+Shift+I` (Win) to open DevTools.
The Guardian mascot should appear on the canvas page.

---

## Remote debugging (optional)

To connect Chrome DevTools to the Figma Desktop Chromium instance:

```bash
/Applications/Figma.app/Contents/MacOS/Figma --remote-debugging-port=9222
```

Then visit `http://localhost:9222` in Chrome to inspect all Figma pages.

---

## Project structure

```
packages/chrome-extension/
├── manifest.json              ← Manifest V3
├── vite.config.ts             ← Vite + vite-plugin-web-extension
├── scripts/
│   └── generate-icons.ts      ← SVG → PNG icon generator (runs pre-build)
├── public/
│   └── icons/                 ← Generated PNGs (gitignored)
└── src/
    ├── content/
    │   └── index.ts           ← Injected into every page
    ├── widget/
    │   ├── GuardianWidget.ts  ← Shadow DOM floating widget
    │   ├── svg.ts             ← Guardian SVG (inline, with animation classes)
    │   └── styles.ts          ← Shadow DOM CSS animations
    ├── popup/
    │   ├── index.html
    │   ├── index.ts
    │   └── popup.css
    └── background/
        └── service-worker.ts  ← MV3 service worker
```

---

## Chrome Web Store notes

- Manifest V3 compliant
- Requires PNG icons (auto-generated by `scripts/generate-icons.ts`)
- `host_permissions: []` — no sensitive permissions needed for the current mascot-only build
- Before submitting: change `"matches": ["<all_urls>"]` to a narrower scope if needed
